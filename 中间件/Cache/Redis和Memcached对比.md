redis最多只能用当前机器的内存的一半

和memcached区别

| redis                                                        | memcached                                                    |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 单线程的服务器（redis也是多线程的，只不过除了主线程以外，其他线程没有event loop，只是会进行一些后台存储工作）简单的reactor实现master 有event loopwork线程没有 | 多线程的（使用master-worker形式，都有event loop）主线程监听端口，建立连接，然后顺序分配给各个工作线程。每一个从线程都有一个event loop，它们服务不同的客户端。master线程和worker线程之间使用管道通信，每一个工作线程都会创建一个管道，然后保存写端和读端，并且将读端加入event loop，监听可读事件。同时，每个从线程都有一个就绪连接队列，主线程连接连接后，将连接的item放入这个队列，然后往该线程的管道的写端写入一个connect命令，这样event loop中加入的管道读端就会就绪，从线程读取命令，解析命令发现是有连接，然后就会去自己的就绪队列中获取连接，并进行处理。多线程的优势就是可以充分发挥多核的优势 |
| 需要使用时交给内核分配                                       | 使用内存池（预先分配一大块内存，然后接下来分配内存就从内存池中分配，这样可以减少内存分配的次数，提高效率 |
| 支持多种数据结构：string，list，set，zset，hash              | 只支持string，简单key-value                                  |
|                                                              |                                                              |